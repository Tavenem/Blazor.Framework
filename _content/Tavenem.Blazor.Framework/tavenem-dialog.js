var e;function g(t){if(!t)return;let n=t.getElementsByClassName("header");n&&n.length&&n[0]instanceof HTMLElement&&(n[0].addEventListener("pointerdown",s),document.addEventListener("pointerup",f),document.addEventListener("pointermove",u)),t.addEventListener("keydown",c.bind(t)),o(t)}function m(t){let n=document.getElementById(t);n instanceof HTMLDialogElement&&g(n)}function p(t){t.showModal(),o(t)}function u(t){if(!e||e.dragStartX==null||e.dragStartY==null)return;if(t.preventDefault(),!e.dragInertiaOvercome)if(Math.abs(t.clientX-e.dragStartX)>10||Math.abs(t.clientY-e.dragStartY)>10)e.dragInertiaOvercome=!0;else return;let n=e.offsetParent?.clientWidth||window.innerWidth,r=e.clientWidth,d=e.offsetParent?.clientHeight||window.innerHeight,l=e.clientHeight,i=Math.min(Math.max(0,(e.dragFinalX||0)+(t.clientX-e.dragStartX)),n-r),a=Math.min(Math.max(0,(e.dragFinalY||0)+(t.clientY-e.dragStartY)),d-l);e.dragCurrentX=i,e.dragCurrentY=a,e.style.left=i+"px",e.style.top=a+"px"}function c(t){t.key==="Escape"&&this.open&&(t.preventDefault(),t.stopPropagation(),this.close())}function s(t){!(t.target instanceof Element)||t.target instanceof HTMLAnchorElement||t.target instanceof HTMLButtonElement||t.target instanceof HTMLInputElement||t.target instanceof HTMLSelectElement||t.target instanceof HTMLTextAreaElement||(t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId),!(!(t.currentTarget instanceof HTMLElement)||!(t.currentTarget.parentElement instanceof HTMLElement)||!(t.currentTarget.parentElement.parentElement instanceof HTMLDialogElement))&&(t.preventDefault(),e=t.currentTarget.parentElement.parentElement,e.dragStartX=t.clientX,e.dragStartY=t.clientY))}function o(t){if(!t)return;let n=t,r=n.getBoundingClientRect();n.dragFinalX=(window.visualViewport?.offsetLeft||window.document.documentElement.offsetLeft)+(window.visualViewport?.width||window.document.documentElement.clientWidth)/2-r.width/2,n.dragFinalY=(window.visualViewport?.offsetTop||window.document.documentElement.offsetTop)+(window.visualViewport?.height||window.document.documentElement.clientHeight)/2-r.height/2,n.style.left=`${n.dragFinalX}px`,n.style.top=`${n.dragFinalY}px`}function f(){e&&(e.dragFinalX=e.dragCurrentX,e.dragFinalY=e.dragCurrentY,delete e.dragStartX,delete e.dragStartY,delete e.dragCurrentX,delete e.dragCurrentY,e=void 0)}export{g as initialize,m as initializeId,p as showModal};
//# sourceMappingURL=tavenem-dialog.js.map
