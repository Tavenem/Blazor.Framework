function u(r){if(!r)return;let e=document.getElementById(r);e&&e instanceof HTMLElement&&(e.getDragDataListener&&e.removeEventListener("dragstart",e.getDragDataListener),e.dragendListener&&e.removeEventListener("dragend",e.dragendListener))}function D(r){if(!r)return;let e=document.getElementById(r);e&&e instanceof HTMLElement&&(e.dragstartListener&&e.removeEventListener("dragstart",e.dragstartListener),e.dragenterListener&&e.removeEventListener("dragenter",e.dragenterListener),e.dragleaveListener&&e.removeEventListener("dragleave",e.dragleaveListener),e.dragoverListener&&e.removeEventListener("dragover",e.dragoverListener),e.dropListener&&e.removeEventListener("drop",e.dropListener))}function E(r,e,n){if(!r||!e)return;let t=document.getElementById(e);t instanceof HTMLElement&&(t.getDragDataListener=g.bind(this,r,n),t.dragendListener=f.bind(this,r),t.addEventListener("dragstart",t.getDragDataListener),t.addEventListener("dragend",t.dragendListener))}function L(r,e,n){if(!r||!e)return;let t=document.getElementById(e);t instanceof HTMLElement&&(t.dragstartListener=s.bind(this),t.dragenterListener=i.bind(this,r,n),t.dragleaveListener=d.bind(this,r,e),t.dragoverListener=o.bind(this),t.dropListener=l.bind(this,r),t.addEventListener("dragstart",t.dragstartListener),t.addEventListener("dragenter",t.dragenterListener),t.addEventListener("dragleave",t.dragleaveListener),t.addEventListener("dragover",t.dragoverListener),t.addEventListener("drop",t.dropListener))}async function i(r,e,n){if(n.dataTransfer&&(e&&(n.dataTransfer.dropEffect=e),e!=="none")){try{e=r.invokeMethod("GetDropEffect",n.dataTransfer.types),e&&(n.dataTransfer.dropEffect=e)}catch(t){console.error("Error in dragEnterHandler: ",{error:t})}e!=="none"&&n.preventDefault();try{r.invokeMethod("SetDropValid",e!=="none")}catch(t){console.error("Error in dragEnterHandler: ",{error:t})}}}async function d(r,e,n){let t=document.getElementById(e);if(!(t instanceof HTMLElement)||!(n.relatedTarget instanceof HTMLElement)||n.relatedTarget.id!==e&&!t.contains(n.relatedTarget))try{r.invokeMethod("SetDropValid",null)}catch(a){console.error("Error in dragEnterHandler: ",{error:a})}}function o(r){r.preventDefault(),r.dataTransfer&&(r.ctrlKey&&(r.dataTransfer.effectAllowed==="copy"||r.dataTransfer.effectAllowed==="copyLink"||r.dataTransfer.effectAllowed==="copyMove")?r.dataTransfer.dropEffect="copy":r.altKey&&(r.dataTransfer.effectAllowed==="link"||r.dataTransfer.effectAllowed==="copyLink"||r.dataTransfer.effectAllowed==="linkMove")?r.dataTransfer.dropEffect="link":r.dataTransfer.dropEffect="move")}function s(r){r.dataTransfer&&r.target instanceof HTMLElement&&r.dataTransfer.setData("",r.target.id)}function l(r,e){if(!e.dataTransfer)return;e.preventDefault();let n=0,t=[];for(let a of e.dataTransfer.types)a!=="Files"&&(t.push({key:a,value:e.dataTransfer.getData(a)}),n++);if(n>0)try{r.invokeMethodAsync("DropHandled",t)}catch(a){console.error("Error in dropHandler: ",{error:a})}}function f(r,e){if(e.dataTransfer)try{r.invokeMethodAsync("DroppedHandled",c(e))}catch(n){console.error("Error in droppedHandler: ",{error:n})}}async function g(r,e,n){if(n.dataTransfer)try{let t=r.invokeMethod("GetDragData");if(!t||!t.data)return;if(e){let a=document.getElementById(e);a&&n.dataTransfer.setDragImage(a,0,0)}t.effectAllowed&&(n.dataTransfer.effectAllowed=t.effectAllowed);for(let a of t.data)typeof a.value!="string"||!a.value.length||n.dataTransfer.setData(a.key,a.value)}catch(t){console.error("Error in getDragData: ",{error:t})}}function c(r){if(!r.dataTransfer)return 0;switch(r.dataTransfer.dropEffect){case"none":return 0;case"copy":return 1;case"link":return 2;case"move":return 4}}export{u as cancelDragListener,D as cancelDropListener,E as listenForDrag,L as listenForDrop};
//# sourceMappingURL=tavenem-dragdrop.js.map
