function e(e){if(!e)return;const r=document.getElementById(e);r&&r instanceof HTMLElement&&(r.dragstartListener&&r.removeEventListener("dragstart",r.dragstartListener),r.dragendListener&&r.removeEventListener("dragend",r.dragendListener))}function r(e){if(!e)return;const r=document.getElementById(e);r&&r instanceof HTMLElement&&(r.dragstartListener&&r.removeEventListener("dragstart",r.dragstartListener),r.dragenterListener&&r.removeEventListener("dragenter",r.dragenterListener),r.dragleaveListener&&r.removeEventListener("dragleave",r.dragleaveListener),r.dragoverListener&&r.removeEventListener("dragover",r.dragoverListener),r.dropListener&&r.removeEventListener("drop",r.dropListener))}function t(e,r,t){if(!e||!r)return;const n=document.getElementById(r);n instanceof HTMLElement&&(n.dragstartListener=c.bind(this,e,t),n.dragendListener=f.bind(this,e),n.addEventListener("dragstart",n.dragstartListener),n.addEventListener("dragend",n.dragendListener))}function n(e,r,t){if(!e||!r)return;const n=document.getElementById(r);n instanceof HTMLElement&&(n.dragstartListener=s.bind(this),n.dragenterListener=a.bind(this,e,t),n.dragleaveListener=d.bind(this,e,r),n.dragoverListener=o.bind(this),n.dropListener=i.bind(this,e),n.addEventListener("dragstart",n.dragstartListener),n.addEventListener("dragenter",n.dragenterListener),n.addEventListener("dragleave",n.dragleaveListener),n.addEventListener("dragover",n.dragoverListener),n.addEventListener("drop",n.dropListener))}async function a(e,r,t){if(t.dataTransfer&&(r&&(t.dataTransfer.dropEffect=r),"none"!==r)){try{(r=e.invokeMethod("GetDropEffect",t.dataTransfer.types))&&(t.dataTransfer.dropEffect=r)}catch(e){console.error("Error in dragEnterHandler: ",{error:e})}"none"!==r&&t.preventDefault();try{e.invokeMethod("SetDropValid","none"!==r)}catch(e){console.error("Error in dragEnterHandler: ",{error:e})}}}async function d(e,r,t){const n=document.getElementById(r);if(!(n instanceof HTMLElement&&t.relatedTarget instanceof HTMLElement&&(t.relatedTarget.id===r||n.contains(t.relatedTarget))))try{e.invokeMethod("SetDropValid",null)}catch(e){console.error("Error in dragEnterHandler: ",{error:e})}}function o(e){e.preventDefault(),e.dataTransfer&&(!e.ctrlKey||"copy"!==e.dataTransfer.effectAllowed&&"copyLink"!==e.dataTransfer.effectAllowed&&"copyMove"!==e.dataTransfer.effectAllowed?!e.altKey||"link"!==e.dataTransfer.effectAllowed&&"copyLink"!==e.dataTransfer.effectAllowed&&"linkMove"!==e.dataTransfer.effectAllowed?e.dataTransfer.dropEffect="move":e.dataTransfer.dropEffect="link":e.dataTransfer.dropEffect="copy")}function s(e){e.dataTransfer&&e.target instanceof HTMLElement&&e.dataTransfer.setData("",e.target.id)}function i(e,r){if(!r.dataTransfer)return;r.preventDefault();let t=0;const n=[];for(const e of r.dataTransfer.types)"Files"!==e&&(n.push({key:e,value:r.dataTransfer.getData(e)}),t++);if(t>0)try{e.invokeMethodAsync("DropHandled",n)}catch(e){console.error("Error in dropHandler: ",{error:e})}}function f(e,r){if(r.dataTransfer)try{e.invokeMethodAsync("DroppedHandled",function(e){if(!e.dataTransfer)return 0;switch(e.dataTransfer.dropEffect){case"none":return 0;case"copy":return 1;case"link":return 2;case"move":return 4}}(r))}catch(e){console.error("Error in droppedHandler: ",{error:e})}}async function c(e,r,t){if(t.dataTransfer)try{const n=e.invokeMethod("GetDragData");if(!n||!n.data)return;if(r){const e=document.getElementById(r);e&&t.dataTransfer.setDragImage(e,0,0)}n.effectAllowed&&(t.dataTransfer.effectAllowed=n.effectAllowed);for(const e of n.data)"string"==typeof e.value&&e.value.length&&t.dataTransfer.setData(e.key,e.value)}catch(e){console.error("Error in getDragData: ",{error:e})}}export{e as cancelDragListener,r as cancelDropListener,t as listenForDrag,n as listenForDrop};
//# sourceMappingURL=tavenem-dragdrop.js.map
